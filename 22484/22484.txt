- бизнес-требования к функционалу Spectrum по выгрузке конверсионных операций остаются без изменений относительно текущей реализации?;
(выборка операций, настройка групп операций, периодичность выгрузки операций и др);

- как выглядит целевая архитектура взаимодействия систем ? 
Spectrum будет интегрироваться напрямую с ОПС "Конверсионные операции" 
(после получения информации от Spectrum ОПС Конверсионные сделки передаёт информацию в Аксиому)?

- Kafka;

- Deal_Sample - заполнение тэгов;

- сообщение с данными по операциям(на каждую операцию отдельное сообщение или группой)?;

- тип взаимодействия();


-------------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------------------------------

Z-Front(текущая реализация):

С заданной периодичностью в AXIOMA.FX происходит выгрузка файлов с информацией о подтверждённых конверсионных операциях:
- оперативная (за текущий день) - запускается с периодичностью 15 минут, начиная с 0:01;
- итоговая (за день T-1 где T -текущая календарная дата (по московскому времени)) - запускается ежесуточно в заданное время.

Сотрудник банка с ролью "Администратор" имеет возможность сделать внеплановую выгрузку через пункт меню (2104500):
ЖурналыВыгрузка операций в AXIOMA.FX

139860;14/01/2022;09/02/2022 12:12:16;;BUY;810;840;7415;100;4102;1;00006;1126;1;74.15;09/02/2022 12:12:16;09/02/2022 12:12:16;20202810011260000001;20202840311260000001;BQ

Бизнес - требования:

- в выборку не должны включаться данные, уже переданные в систему в предыдущих выгрузках;
- по закрытию операционного дня формировать итоговые файлы со всеми операциями, выгруженными за этот день;
- при отборе операций, подлежащих выгрузке, использовать следующий критерий: валюта по Дебету не совпадает с валютой по Кредиту, с учетом Списка исключений;
- обеспечить ведение Списка исключений из кодов операций, которые не подлежат выгрузке;
- обеспечить выгрузку с соответствующим признаком аннулированных конверсионных операций, конверсионная операция, подтверждённая или аннулированная, должна присутствовать в итоговых файлах один раз;
- в выгрузке по операции должен проставляться признак ГК, в какой ГК (БИСквит или ЦФТ2.0 MAIN) она отражается на балансе.

В планировщике заданий "Выгрузка оперативного файла в AXIOMA.FX" (spectrum.vtb24.zfront.Vtb24ExportZFrontOperFileJob).

Ограничения:
В текущей реализации действуют следующие ограничения:
- При формировании оперативного файла дата операционного дня принимается равной текущей календарной дате (по московскому времени).
- При формировании итоговых файлов дата операционного дня принимается равной текущей календарной дате (по московскому времени) минус один день.
- Повторное формирование оперативных или итоговых файлов не предусматривается. Вследствие этого оперативная выгрузка за предыдущий 
(относительно календарной даты по московскому времени) операционный день будет невозможна.
- При формировании файлов не выполняется проверка того, закрыт ли текущий операционный день во всех подразделениях, 
следовательно, в случае подтверждения или аннулирования операции в подразделении, где операционный день не был закрыт до момента последней 
за сутки выгрузки в оперативный файл, такая операция выгружена не будет. Т.о. требуемый алгоритм отбора документов не гарантирует выгрузки 
всех конверсионных операций, связанных с картой или мастер-счетом Профайл.

Например, в подразделении операционный день не закрыли вечером и аннулирование операции для выгрузки произвели в 
следующей календарной дате. Операция не попадет в выгрузку.

----------------------------------------------------------------------------------------------------------------------------

Итоги встречи 15.02.2022:

- интеграция с Axioma через Kafka(информация по Kafka будет позже);
- сверить ограничения по попаданию в выгрузку операций;
- предварительно пользуемся только Deal_sample.json;
- обновленный фаил с атрибутами сообщения().

-----------------------------------------------------------------------------------------------------------------------------

На данный момент удалось получить следующие результаты анализа задачи 
"FRSOF-491 Интеграция - Выгрузка конверсионных операций (исключение файлового обмена)".

Согластно информации, полученной на встрече 15.02.2022 (Черняев К.В.,Елисеева Д.В.):

- интеграция Spectrum и Axioma по выгрузке конверсионных операций будет реализована через Kafka;
- технической информации, необходимой для подключения Spectrum к Kafka пока что нет;
- по предположению коллег из Axiom'ы, выгрузка конверсионных операций будет осуществляться сразу после подтверждения
  операции в Spectrum(одна операция - одно сообщение);
- подтверждения доставки сообщения нет;
- необходимо сверить механизм отбора операции, попадающих в выгрузку;
- необходима отдеьная проработка с Axiom'ой вопроса с валютными парами(различия в справочниках валют Spectrum и Axioma) и базовой валютой операции;
- необходима отдельная проработка вопроса по выгрузке информации по счетам в Axiom'у(с точки зрения безопасности данных);

-----------------------------------------------------------------------------------------------------------------------------

На данный момент удалось получить следующие результаты анализа задачи 
"FRSOF-491 Интеграция - Выгрузка конверсионных операций (исключение файлового обмена)":

Согласно информации, полученной на встрече 15.02.2022 (Черняев К.В., Елисеева Д.В.):
 
- интеграция Spectrum и Axioma по выгрузке конверсионных операций будет реализована через Kafka:
  RwDeals Kafka - https://wiki.corp.dev.vtb/display/AXIOMA/RawDeals+Kafka ;
- технической информации, необходимой для подключения Spectrum к Kafka пока что нет;
- по предположению коллег из Axiom'ы, выгрузка конверсионных операций будет осуществляться сразу после подтверждения
  операции в Spectrum(одна операция - одно сообщение);
- подтверждения доставки сообщения нет;
- необходимо сверить механизм отбора операции, попадающих в выгрузку;
- необходима отдеьная проработка с Axiom'ой вопроса с валютными парами(различия в справочниках валют Spectrum и Axioma) и базовой валютой операции;
- необходима отдельная проработка вопроса по выгрузке информации по счетам в Axiom'у(с точки зрения безопасности данных);

Ниже представлена сводная таблица с атрибутным составом сообщения в Axioma:

----------------------------------------------------------------------------------------------------------------------------

Добрый день.

Прошу прощения за долгий ответ:

1. - подтверждения доставки сообщения нет; (Это точно нормальное решение от Аксиомы?) -  это особенность взаимодействия систем через кафку
(модель: публикация - подписка).

2. - необходима отдельная проработка вопроса по выгрузке информации по счетам в Axiom'у
(с точки зрения безопасности данных); (Пока не поняла, что может попадать под ограничения ИБ?) - имеется ввиду, что необходимо отдельно проработать вопрос
передачи данных с сотрудниками СБ, они и сообщат, попадает что-нибудь под ограничение безопасности или нет.

